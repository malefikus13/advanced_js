{"code":"!function(e){function n(e){var n=require(\"./\"+e+\".\"+o+\".hot-update.js\");!function(e,n){if(!O[e]||!g[e])return;for(var r in g[e]=!1,n)Object.prototype.hasOwnProperty.call(n,r)&&(h[r]=n[r]);0==--y&&0===m&&x()}(n.id,n.modules)}var r,t=!0,o=\"0a251c44c0dbf7e172d9\",i={},c=[],d=[];function s(e){var n=P[e];if(!n)return S;var t=function(t){return n.hot.active?(P[t]?-1===P[t].parents.indexOf(e)&&P[t].parents.push(e):(c=[e],r=t),-1===n.children.indexOf(t)&&n.children.push(t)):(console.warn(\"[HMR] unexpected require(\"+t+\") from disposed module \"+e),c=[]),S(t)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return S[e]},set:function(n){S[e]=n}}};for(var i in S)Object.prototype.hasOwnProperty.call(S,i)&&\"e\"!==i&&\"t\"!==i&&Object.defineProperty(t,i,o(i));return t.e=function(e){return\"ready\"===l&&f(\"prepare\"),m++,S.e(e).then(n,function(e){throw n(),e});function n(){m--,\"prepare\"===l&&(b[e]||w(e),0===m&&0===y&&x())}},t.t=function(e,n){return 1&n&&(e=t(e)),S.t(e,-2&n)},t}function a(e){var n={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:r!==e,active:!0,accept:function(e,r){if(void 0===e)n._selfAccepted=!0;else if(\"function\"==typeof e)n._selfAccepted=e;else if(\"object\"==typeof e)for(var t=0;t<e.length;t++)n._acceptedDependencies[e[t]]=r||function(){};else n._acceptedDependencies[e]=r||function(){}},decline:function(e){if(void 0===e)n._selfDeclined=!0;else if(\"object\"==typeof e)for(var r=0;r<e.length;r++)n._declinedDependencies[e[r]]=!0;else n._declinedDependencies[e]=!0},dispose:function(e){n._disposeHandlers.push(e)},addDisposeHandler:function(e){n._disposeHandlers.push(e)},removeDisposeHandler:function(e){var r=n._disposeHandlers.indexOf(e);r>=0&&n._disposeHandlers.splice(r,1)},check:j,apply:D,status:function(e){if(!e)return l;u.push(e)},addStatusHandler:function(e){u.push(e)},removeStatusHandler:function(e){var n=u.indexOf(e);n>=0&&u.splice(n,1)},data:i[e]};return r=void 0,n}var u=[],l=\"idle\";function f(e){l=e;for(var n=0;n<u.length;n++)u[n].call(null,e)}var p,h,v,y=0,m=0,b={},g={},O={};function _(e){return+e+\"\"===e?+e:e}function j(e){if(\"idle\"!==l)throw new Error(\"check() is only allowed in idle status\");return t=e,f(\"check\"),function(){try{var e=require(\"./\"+o+\".hot-update.json\")}catch(e){return Promise.resolve()}return Promise.resolve(e)}().then(function(e){if(!e)return f(\"idle\"),null;g={},b={},O=e.c,v=e.h,f(\"prepare\");var n=new Promise(function(e,n){p={resolve:e,reject:n}});h={};return w(0),\"prepare\"===l&&0===m&&0===y&&x(),n})}function w(e){O[e]?(g[e]=!0,y++,n(e)):b[e]=!0}function x(){f(\"ready\");var e=p;if(p=null,e)if(t)Promise.resolve().then(function(){return D(t)}).then(function(n){e.resolve(n)},function(n){e.reject(n)});else{var n=[];for(var r in h)Object.prototype.hasOwnProperty.call(h,r)&&n.push(_(r));e.resolve(n)}}function D(n){if(\"ready\"!==l)throw new Error(\"apply() is only allowed in ready status\");var r,t,d,s,a;function u(e){for(var n=[e],r={},t=n.slice().map(function(e){return{chain:[e],id:e}});t.length>0;){var o=t.pop(),i=o.id,c=o.chain;if((s=P[i])&&!s.hot._selfAccepted){if(s.hot._selfDeclined)return{type:\"self-declined\",chain:c,moduleId:i};if(s.hot._main)return{type:\"unaccepted\",chain:c,moduleId:i};for(var d=0;d<s.parents.length;d++){var a=s.parents[d],u=P[a];if(u){if(u.hot._declinedDependencies[i])return{type:\"declined\",chain:c.concat([a]),moduleId:i,parentId:a};-1===n.indexOf(a)&&(u.hot._acceptedDependencies[i]?(r[a]||(r[a]=[]),p(r[a],[i])):(delete r[a],n.push(a),t.push({chain:c.concat([a]),id:a})))}}}}return{type:\"accepted\",moduleId:e,outdatedModules:n,outdatedDependencies:r}}function p(e,n){for(var r=0;r<n.length;r++){var t=n[r];-1===e.indexOf(t)&&e.push(t)}}n=n||{};var y={},m=[],b={},g=function(){console.warn(\"[HMR] unexpected require(\"+w.moduleId+\") to disposed module\")};for(var j in h)if(Object.prototype.hasOwnProperty.call(h,j)){var w;a=_(j);var x=!1,D=!1,E=!1,H=\"\";switch((w=h[j]?u(a):{type:\"disposed\",moduleId:j}).chain&&(H=\"\\nUpdate propagation: \"+w.chain.join(\" -> \")),w.type){case\"self-declined\":n.onDeclined&&n.onDeclined(w),n.ignoreDeclined||(x=new Error(\"Aborted because of self decline: \"+w.moduleId+H));break;case\"declined\":n.onDeclined&&n.onDeclined(w),n.ignoreDeclined||(x=new Error(\"Aborted because of declined dependency: \"+w.moduleId+\" in \"+w.parentId+H));break;case\"unaccepted\":n.onUnaccepted&&n.onUnaccepted(w),n.ignoreUnaccepted||(x=new Error(\"Aborted because \"+a+\" is not accepted\"+H));break;case\"accepted\":n.onAccepted&&n.onAccepted(w),D=!0;break;case\"disposed\":n.onDisposed&&n.onDisposed(w),E=!0;break;default:throw new Error(\"Unexception type \"+w.type)}if(x)return f(\"abort\"),Promise.reject(x);if(D)for(a in b[a]=h[a],p(m,w.outdatedModules),w.outdatedDependencies)Object.prototype.hasOwnProperty.call(w.outdatedDependencies,a)&&(y[a]||(y[a]=[]),p(y[a],w.outdatedDependencies[a]));E&&(p(m,[w.moduleId]),b[a]=g)}var I,A=[];for(t=0;t<m.length;t++)a=m[t],P[a]&&P[a].hot._selfAccepted&&A.push({module:a,errorHandler:P[a].hot._selfAccepted});f(\"dispose\"),Object.keys(O).forEach(function(e){!1===O[e]&&function(e){delete installedChunks[e]}(e)});for(var M,k,q=m.slice();q.length>0;)if(a=q.pop(),s=P[a]){var C={},J=s.hot._disposeHandlers;for(d=0;d<J.length;d++)(r=J[d])(C);for(i[a]=C,s.hot.active=!1,delete P[a],delete y[a],d=0;d<s.children.length;d++){var N=P[s.children[d]];N&&((I=N.parents.indexOf(a))>=0&&N.parents.splice(I,1))}}for(a in y)if(Object.prototype.hasOwnProperty.call(y,a)&&(s=P[a]))for(k=y[a],d=0;d<k.length;d++)M=k[d],(I=s.children.indexOf(M))>=0&&s.children.splice(I,1);for(a in f(\"apply\"),o=v,b)Object.prototype.hasOwnProperty.call(b,a)&&(e[a]=b[a]);var F=null;for(a in y)if(Object.prototype.hasOwnProperty.call(y,a)&&(s=P[a])){k=y[a];var U=[];for(t=0;t<k.length;t++)if(M=k[t],r=s.hot._acceptedDependencies[M]){if(-1!==U.indexOf(r))continue;U.push(r)}for(t=0;t<U.length;t++){r=U[t];try{r(k)}catch(e){n.onErrored&&n.onErrored({type:\"accept-errored\",moduleId:a,dependencyId:k[t],error:e}),n.ignoreErrored||F||(F=e)}}}for(t=0;t<A.length;t++){var R=A[t];a=R.module,c=[a];try{S(a)}catch(e){if(\"function\"==typeof R.errorHandler)try{R.errorHandler(e)}catch(r){n.onErrored&&n.onErrored({type:\"self-accept-error-handler-errored\",moduleId:a,error:r,originalError:e}),n.ignoreErrored||F||(F=r),F||(F=e)}else n.onErrored&&n.onErrored({type:\"self-accept-errored\",moduleId:a,error:e}),n.ignoreErrored||F||(F=e)}}return F?(f(\"fail\"),Promise.reject(F)):(f(\"idle\"),new Promise(function(e){e(m)}))}var P={};function S(n){if(P[n])return P[n].exports;var r=P[n]={i:n,l:!1,exports:{},hot:a(n),parents:(d=c,c=[],d),children:[]};return e[n].call(r.exports,r,r.exports,s(n)),r.l=!0,r.exports}S.m=e,S.c=P,S.d=function(e,n,r){S.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},S.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},S.t=function(e,n){if(1&n&&(e=S(e)),8&n)return e;if(4&n&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(S.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&n&&\"string\"!=typeof e)for(var t in e)S.d(r,t,function(n){return e[n]}.bind(null,t));return r},S.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return S.d(n,\"a\",n),n},S.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},S.p=\"/\",S.h=function(){return o},s(2)(S.s=2)}([function(e,n){e.exports=require(\"fs\")},function(e,n){e.exports=require(\"express\")},function(e,n,r){var t=r(1),o=r(0),i=r(3),c=t();c.use(t.json()),c.use(\"/\",t.static(\"dist/public\")),c.use(\"/api/cart\",i),c.get(\"/api/products\",function(e,n){o.readFile(\"dist/server/db/products.json\",\"utf-8\",function(e,r){e?n.sendStatus(404,JSON.stringify({result:0,text:e})):n.send(r)})});var d=process.env.PORT||3e3;c.listen(d,function(){return console.log(\"Слушаем порт \".concat(d,\" ....\"))})},function(e,n,r){var t=r(1),o=r(0),i=r(4),c=t.Router();c.get(\"/\",function(e,n){o.readFile(\"dist/server/db/userCart.json\",\"utf-8\",function(e,r){e?n.sendStatus(404,JSON.stringify({result:0,text:e})):n.send(r)})}),c.post(\"/\",function(e,n){i(e,n,\"add\",\"dist/server/db/userCart.json\")}),c.put(\"/:id\",function(e,n){i(e,n,\"change\",\"dist/server/db/userCart.json\")}),c.delete(\"/:id\",function(e,n){i(e,n,\"remove\",\"dist/server/db/userCart.json\")}),e.exports=c},function(e,n,r){var t=r(0),o=r(5),i=r(6),c={add:o.add,change:o.change,remove:o.remove};e.exports=function(e,n,r,o){t.readFile(o,\"utf-8\",function(d,s){if(d)n.sendStatus(404,JSON.stringify({result:0,text:d}));else{var a=c[r](JSON.parse(s),e),u=a.name,l=a.newCart;t.writeFile(o,l,function(e){e?n.send('{\"result\": 0}'):(i(u,r),n.send('{\"result\": 1}'))})}})}},function(e,n){e.exports={add:function(e,n){return e.contents.push(n.body),{name:n.body.product_name,newCart:JSON.stringify(e,null,4)}},change:function(e,n){var r=e.contents.find(function(e){return e.id_product===+n.params.id});return r.quantity+=n.body.quantity,{name:r.product_name,newCart:JSON.stringify(e,null,4)}},remove:function(e,n){var r=e.contents.find(function(e){return e.id_product===+n.params.id});return e.contents.splice(e.contents.indexOf(r),1),{name:r.product_name,newCart:JSON.stringify(e,null,4)}}}},function(e,n,r){var t=r(7),o=r(0);e.exports=function(e,n){o.readFile(\"dist/server/db/stats.json\",\"utf-8\",function(r,i){if(r)console.log(\"Прочитать файл не получилось\");else{var c=JSON.parse(i);c.push({time:t().format(\"DD MMM YYYY, h:mm:ss a\"),prod_name:e,action:n}),o.writeFile(\"dist/server/db/stats.json\",JSON.stringify(c,null,4),function(e){e&&console.log(\"Не удалось записать в файл\")})}})}},function(e,n){e.exports=require(\"moment\")}]);","extractedComments":[]}